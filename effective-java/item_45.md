# ì•„ì´í…œ 45. ìŠ¤íŠ¸ë¦¼ì€ ì£¼ì˜í•´ì„œ ì‚¬ìš©í•˜ë¼

- [ì•„ì´í…œ 45. ìŠ¤íŠ¸ë¦¼ì€ ì£¼ì˜í•´ì„œ ì‚¬ìš©í•˜ë¼](#ì•„ì´í…œ-45-ìŠ¤íŠ¸ë¦¼ì€-ì£¼ì˜í•´ì„œ-ì‚¬ìš©í•˜ë¼)
  - [ìŠ¤íŠ¸ë¦¼ APIëŠ”?](#ìŠ¤íŠ¸ë¦¼-apiëŠ”)
    - [ìŠ¤íŠ¸ë¦¼ APIê°€ ì œê³µí•˜ëŠ” ì¶”ìƒ ê°œë… ì¤‘ í•µì‹¬ì€ ë‘ ê°€ì§€](#ìŠ¤íŠ¸ë¦¼-apiê°€-ì œê³µí•˜ëŠ”-ì¶”ìƒ-ê°œë…-ì¤‘-í•µì‹¬ì€-ë‘-ê°€ì§€)
    - [ìŠ¤íŠ¸ë¦¼ì˜ ì›ì†ŒëŠ” ì–´ë””ë¡œë¶€í„°ë“  ì˜¬ ìˆ˜ ìˆë‹¤.](#ìŠ¤íŠ¸ë¦¼ì˜-ì›ì†ŒëŠ”-ì–´ë””ë¡œë¶€í„°ë“ -ì˜¬-ìˆ˜-ìˆë‹¤)
    - [ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì€?](#ìŠ¤íŠ¸ë¦¼-íŒŒì´í”„ë¼ì¸ì€)
    - [ìŠ¤íŠ¸ë¦¼ APIì˜ íŠ¹ì§•](#ìŠ¤íŠ¸ë¦¼-apiì˜-íŠ¹ì§•)
  - [ì•„ë‚˜ê·¸ë¨(anagram) ê·¸ë£¹ì„ ì¶œë ¥í•˜ê¸°](#ì•„ë‚˜ê·¸ë¨anagram-ê·¸ë£¹ì„-ì¶œë ¥í•˜ê¸°)
    - [ì•„ë‚˜ê·¸ë¨(anagram) ê·¸ë£¹ì„ ì¶œë ¥í•˜ê¸° - ìŠ¤íŠ¸ë¦¼ ê³¼ìš©í•œ í”„ë¡œê·¸ë¨](#ì•„ë‚˜ê·¸ë¨anagram-ê·¸ë£¹ì„-ì¶œë ¥í•˜ê¸°---ìŠ¤íŠ¸ë¦¼-ê³¼ìš©í•œ-í”„ë¡œê·¸ë¨)
    - [ì•„ë‚˜ê·¸ë¨(anagram) ê·¸ë£¹ì„ ì¶œë ¥í•˜ê¸° - ì ë‹¹íˆ ìŠ¤íŠ¸ë¦¼ì„ ì‚¬ìš©í•œ ì½”ë“œ](#ì•„ë‚˜ê·¸ë¨anagram-ê·¸ë£¹ì„-ì¶œë ¥í•˜ê¸°---ì ë‹¹íˆ-ìŠ¤íŠ¸ë¦¼ì„-ì‚¬ìš©í•œ-ì½”ë“œ)
  - [CharStream](#charstream)
  - [ëª¨ë“  ë°˜ë³µë¬¸ì„ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë°”ê¾¸ê³  ì‹¶ì€ ìœ í˜¹ì´ ì¼ê² ì§€ë§Œ, ì„œë‘ë¥´ì§€ ì•ŠëŠ” ê²Œ ì¢‹ë‹¤.](#ëª¨ë“ -ë°˜ë³µë¬¸ì„-ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ-ë°”ê¾¸ê³ -ì‹¶ì€-ìœ í˜¹ì´-ì¼ê² ì§€ë§Œ-ì„œë‘ë¥´ì§€-ì•ŠëŠ”-ê²Œ-ì¢‹ë‹¤)
    - [í•¨ìˆ˜ ê°ì²´ë¡œëŠ” í•  ìˆ˜ ì—†ì§€ë§Œ, ì½”ë“œ ë¸”ë¡ìœ¼ë¡œëŠ” í•  ìˆ˜ ìˆëŠ” ì¼ë“¤ì˜ ì˜ˆ](#í•¨ìˆ˜-ê°ì²´ë¡œëŠ”-í• -ìˆ˜-ì—†ì§€ë§Œ-ì½”ë“œ-ë¸”ë¡ìœ¼ë¡œëŠ”-í• -ìˆ˜-ìˆëŠ”-ì¼ë“¤ì˜-ì˜ˆ)
    - [ê·¸ëŸ¼ ìŠ¤íŠ¸ë¦¼ì´ ì•„ì£¼ ì•ˆì„±ë§ì¶¤ì¸ ì¼ë“¤ì€?](#ê·¸ëŸ¼-ìŠ¤íŠ¸ë¦¼ì´-ì•„ì£¼-ì•ˆì„±ë§ì¶¤ì¸-ì¼ë“¤ì€)
    - [ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ì–´ë ¤ìš´ ì¼ì€?](#ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ-ì²˜ë¦¬í•˜ê¸°-ì–´ë ¤ìš´-ì¼ì€)
    - [ë©”ë¥´ì„¼ ì†Œìˆ˜(Mersenne prime) êµ¬í•˜ê¸°](#ë©”ë¥´ì„¼-ì†Œìˆ˜mersenne-prime-êµ¬í•˜ê¸°)
    - [ì¹´ë“œ ë±ì„ ì´ˆê¸°í™”í•˜ëŠ” ì‘ì—…](#ì¹´ë“œ-ë±ì„-ì´ˆê¸°í™”í•˜ëŠ”-ì‘ì—…)
  - [ê²°ë¡ ](#ê²°ë¡ )
  - [í•µì‹¬ ì •ë¦¬](#í•µì‹¬-ì •ë¦¬)
  - [References](#references)

## ìŠ¤íŠ¸ë¦¼ APIëŠ”?

- ë‹¤ëŸ‰ì˜ ë°ì´í„° ì²˜ë¦¬ ì‘ì—…(ìˆœì°¨ì ì´ë“ , ë³‘ë ¬ì ì´ë“ )ì„ ë•ê³ ì ìë°” 8ì— ì¶”ê°€ë˜ì—ˆë‹¤.

### ìŠ¤íŠ¸ë¦¼ APIê°€ ì œê³µí•˜ëŠ” ì¶”ìƒ ê°œë… ì¤‘ í•µì‹¬ì€ ë‘ ê°€ì§€

1.  ìŠ¤íŠ¸ë¦¼(stream)ì€ ë°ì´í„° ì›ì†Œì˜ ìœ í•œ í˜¹ì€ ë¬´í•œ ì‹œí€€ìŠ¤(sequence)ë¥¼ ëœ»í•œë‹¤.
2.  ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸(stream pipeline)ì€ ì´ ì›ì†Œë“¤ë¡œ ìˆ˜í–‰í•˜ëŠ” **ì—°ì‚° ë‹¨ê³„ë¥¼ í‘œí˜„í•˜ëŠ” ê°œë…**ì´ë‹¤.

### ìŠ¤íŠ¸ë¦¼ì˜ ì›ì†ŒëŠ” ì–´ë””ë¡œë¶€í„°ë“  ì˜¬ ìˆ˜ ìˆë‹¤.

- ëŒ€í‘œì ìœ¼ë¡œëŠ”, `ì»¬ë ‰ì…˜`, `ë°°ì—´`, `íŒŒì¼`, `ì •ê·œí‘œí˜„ì‹ íŒ¨í„´ ë§¤ì²˜(matcher)`, `ë‚œìˆ˜ ìƒì„±ê¸°`, í˜¹ì€ ë‹¤ë¥¸ ìŠ¤íŠ¸ë¦¼

ìŠ¤íŠ¸ë¦¼ ì•ˆì˜ ë°ì´í„° ì›ì†Œë“¤ì€ ê°ì²´ ì°¸ì¡°ë‚˜, ê¸°ë³¸ íƒ€ì… ê°’

- ê¸°ë³¸ íƒ€ì… ê°’ìœ¼ë¡œëŠ” `int`, `long`, `double` ì´ë ‡ê²Œ ì„¸ ê°€ì§€ë¥¼ ì§€ì›

### ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì€?

- ì†ŒìŠ¤ ìŠ¤íŠ¸ë¦¼ì—ì„œ ì‹œì‘í•´ `ì¢…ë‹¨ ì—°ë‹¨(terminal operation)`ìœ¼ë¡œ ëë‚œë‹¤.
- ê·¸ ì‚¬ì´ì— í•˜ë‚˜ ì´ìƒì˜ `ì¤‘ê°„ ì—°ì‚°(intermediate operation)`ì´ ìˆì„ ìˆ˜ ìˆë‹¤.
  - ê° ì¤‘ê°„ ì—°ì‚°ì€ ìŠ¤íŠ¸ë¦¼ì„ ì–´ë– í•œ ë°©ì‹ìœ¼ë¡œ `ë³€í™˜(transform)`í•œë‹¤.
    - ê° ì›ì†Œì— **í•¨ìˆ˜ë¥¼ ì ìš©**í•˜ê±°ë‚˜, **íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡± ëª»í•˜ëŠ” ì›ì†Œë¥¼ ê±¸ëŸ¬ë‚¼ ìˆ˜ ìˆë‹¤**ëŠ” ì˜ë¯¸
  - ì¤‘ê°„ ì—°ì‚°ë“¤ì€ ë³€í™˜ ì „ ìŠ¤íŠ¸ë¦¼ì˜ ì›ì†Œ íƒ€ì…ê³¼ **ê°™ì„ ìˆ˜ë„ ìˆê³ , ë‹¤ë¥¼ ìˆ˜ë„ ìˆë‹¤**.
- ì¢…ë‹¨ ì—°ì‚°ì€ ë§ˆì§€ë§‰ ì¤‘ê°„ ì—°ì‚°ì´ ë‚´ë†“ì€ ìŠ¤íŠ¸ë¦¼ì— ìµœí›„ ì—°ì‚°ì„ ê°€í•œë‹¤.
  - ì›ì†Œë¥¼ ì •ë ¬í•´ ì»¬ë ‰ì…˜ì— ë‹´ê±°ë‚˜, íŠ¹ì • ì›ì†Œ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ê±°ë‚˜, ëª¨ë“  ì›ì†Œë¥¼ ì¶œë ¥í•˜ëŠ” ì‹
- **ì§€ì—° í‰ê°€(lazy evalutaion)**ëœë‹¤.
  - í‰ê°€ëŠ” ì¢…ë‹¨ ì—°ì‚°ì´ í˜¸ì¶œë  ë•Œ ì´ë¤„ì§„ë‹¤.
  - ì¢…ë‹¨ ì—°ì‚°ì— ì“°ì´ì§€ ì•ŠëŠ” ë°ì´í„° ì›ì†ŒëŠ” ê³„ì‚°ì— ì“°ì´ì§€ ì•ŠëŠ”ë‹¤.
  - ì´ëŸ¬í•œ ì§€ì—° í‰ê°€ê°€ ë¬´í•œ ìŠ¤íŠ¸ë¦¼ì„ ë‹¤ë£° ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì—´ì‡ 
  - ì¢…ë‹¨ ì—°ì‚°ì´ ì—†ëŠ” ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì€ ì•„ë¬´ ì¼ë„ ì•ŠëŠ” ëª…ë ¹ì–´ì¸ no-opê³¼ ê°™ìœ¼ë‹ˆ, ì¢…ë‹¨ ì—°ì‚°ì„ ë¹¼ë¨¹ëŠ” ì¼ì´ ì ˆëŒ€ ì—†ë„ë¡ í•˜ì.

### ìŠ¤íŠ¸ë¦¼ APIì˜ íŠ¹ì§•

ìŠ¤íŠ¸ë¦¼ APIëŠ” ë©”ì„œë“œ ì—°ì‡„ë¥¼ ì§€ì›í•˜ëŠ” **í”Œë£¨ì–¸íŠ¸ API(fluent API)**ë‹¤.

- ì¦‰ íŒŒì´í”„ë¼ì¸ í•˜ë‚˜ë¥¼ êµ¬ì„±í•˜ëŠ” ëª¨ë“  í˜¸ì¶œì„ ì—°ê²°í•˜ì—¬, ë‹¨ í•˜ë‚˜ì˜ í‘œí˜„ì‹ìœ¼ë¡œ ì™„ì„±í•  ìˆ˜ ìˆë‹¤.
- íŒŒì´í”„ë¼ì¸ ì—¬ëŸ¬ ê°œë¥¼ ì—°ê²°í•´ í‘œí˜„ì‹ í•˜ë‚˜ë¡œ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì€ **ìˆœì°¨ì ìœ¼ë¡œ ìˆ˜í–‰**ëœë‹¤.

- íŒŒì´í”„ë¼ì¸ì„ ë³‘ë ¬ë¡œ ì‹¤í–‰í•˜ë ¤ë©´ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì„±í•˜ëŠ” ìŠ¤íŠ¸ë¦¼ ì¤‘ í•˜ë‚˜ì—ì„œ parallel ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì£¼ê¸°ë§Œ í•˜ë©´ ë˜ë‚˜,
- íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆëŠ” ìƒí™©ì€ ë§ì§€ ì•Šë‹¤. (ì•„ì´í…œ 48)

ìŠ¤íŠ¸ë¦¼ APIëŠ” ë‹¤ì¬ë‹¤ëŠ¥í•˜ì—¬ ì‚¬ì‹¤ìƒ ì–´ë– í•œ ê³„ì‚°ì´ë¼ë„ í•´ë‚¼ ìˆ˜ ìˆë‹¤.

- í•˜ì§€ë§Œ í•  ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì´ì§€, **í•´ì•¼ í•œë‹¤ëŠ” ëœ»ì€ ì•„ë‹ˆë‹¤**.
- ìŠ¤íŠ¸ë¦¼ì„ ì œëŒ€ë¡œ ì‚¬ìš©í•˜ë©´ í”„ë¡œê·¸ë¨ì´ ì§§ê³  ê¹”ë”í•´ì§€ì§€ë§Œ
- **ì˜ëª» ì‚¬ìš©í•˜ë©´ ìœ ì§€ë³´ìˆ˜ë„ í˜ë“¤ì–´ì§„ë‹¤**.
- ìŠ¤íŠ¸ë¦¼ì„ ì–¸ì œ ì¨ì•¼ í•˜ëŠ”ì§€ë¥¼ ê·œì •í•˜ëŠ” í™•ê³ ë¶€ë™í•œ ê·œì¹™ì€ ì—†ì§€ë§Œ, **ì°¸ê³ í•  ë§Œí•œ ë…¸í•˜ìš°**ëŠ” ìˆë‹¤.

---

## ì•„ë‚˜ê·¸ë¨(anagram) ê·¸ë£¹ì„ ì¶œë ¥í•˜ê¸°

ë‹¤ìŒ ì½”ë“œëŠ” ë‹¨ì–´ë¥¼ ì½ì–´ì„œ ì‚¬ìš©ìê°€ ì§€ì •í•œ ë¬¸í„±ê°’ë³´ë‹¤ ì›ì†Œ ìˆ˜ê°€ ë§ì€ ì•„ë‚˜ê·¸ë¨(anagram) ê·¸ë£¹ì„ ì¶œë ¥í•œë‹¤.

> ì•„ë‚˜ê·¸ë¨(anagram)ì´ë€?
>
> ì² ìë¥¼ êµ¬ì„±í•˜ëŠ” ì•ŒíŒŒë²³ì´ ê°’ê³  ìˆœì„œë§Œ ë‹¤ë¥¸ ë‹¨ì–´

```kotlin
import java.io.File
import java.io.IOException
import java.nio.file.Paths
import java.util.Arrays
import java.util.Scanner
import java.util.TreeSet

class IterativeAnagrams(
    private val dictionary: File,
    private val minGroupSize: Int
) {
    fun run() {
        val groups = mutableMapOf<String, TreeSet<String>>()
        try {
            val s = Scanner(dictionary)
            while (s.hasNext()) {
                val word = s.next()
                groups.computeIfAbsent(
                    alphabetize(word)
                ) { TreeSet<String>() }.add(word)
            }
        } catch (e: IOException) { }

        for (group in groups.values) {
            if (group.size >= minGroupSize) {
                println(group.size.toString() + ": " + group)
            }
        }
    }

    private fun alphabetize(s: String): String {
        val a = s.toCharArray()
        Arrays.sort(a)
        return String(a)
    }
}


fun main() {
    println("Example : IterativeAnagrams")
    val dictionary = File(dictionaryFilePath)
    val minGroupSize = 1

    val iterativeAnagrams = IterativeAnagrams(dictionary, minGroupSize)
    iterativeAnagrams.run()
}

// ì‹¤í–‰ ê²°ê³¼
//
// 2: [petals, staple]
// 2: [eros, rose]
```

ì´ í”„ë¡œê·¸ë¨ì˜ ì•„ë˜ ë‹¨ê³„ì— ì£¼ëª©í•˜ì.

```kotlin
groups.computeIfAbsent(
    alphabetize(word)
) { TreeSet<String>() }.add(word)
```

ë§µì— ê° ë‹¨ì–´ë¥¼ ì‚½ì…í•  ë•Œ ìë°” 8ì—ì„œ ì¶”ê°€ëœ `computeIfAbsent`ë©”ì„œë“œë¥¼ ì‚¬ìš©í–ˆë‹¤.

`computeIfAbsent`ë©”ì„œë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```java
default V computeIfAbsent(K key,
        Function<? super K, ? extends V> mappingFunction) {
    Objects.requireNonNull(mappingFunction);
    V v;
    if ((v = get(key)) == null) {
        V newValue;
        if ((newValue = mappingFunction.apply(key)) != null) {
            put(key, newValue);
            return newValue;
        }
    }

    return v;
}
```

ì´ ë©”ì„œë“œëŠ” ë§µ ì•ˆì— í‚¤ê°€ ìˆëŠ”ì§€ ì°¾ì€ ë‹¤ìŒ, ìˆìœ¼ë©´ ë‹¨ìˆœíˆ ê·¸ í‚¤ì— ë§¤í•‘ëœ ê°’ì„ ë°˜í™˜í•œë‹¤.

í‚¤ê°€ ì—†ìœ¼ë©´, ê±´ë„¤ì§„ í•¨ìˆ˜ ê°ì²´ë¥¼ í‚¤ì— ì ìš©í•˜ì—¬ ê°’ì„ ê³„ì‚°í•´ë‚¸ ë‹¤ìŒ, ê·¸ í‚¤ì™€ ê°’ì„ ë§¤í•‘í•´ë†“ê³ , ê³„ì‚°ëœ ê°’ì„ ë°˜í™˜í•œë‹¤.

ì´ì²˜ëŸ¼ `computeIfAbsent`ë¥¼ ì‚¬ìš©í•˜ë©´ ê° í‚¤ì— ë‹¤ìˆ˜ì˜ ê°’ì„ ë§¤í•‘í•˜ëŠ” ë§µì„ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

### ì•„ë‚˜ê·¸ë¨(anagram) ê·¸ë£¹ì„ ì¶œë ¥í•˜ê¸° - ìŠ¤íŠ¸ë¦¼ ê³¼ìš©í•œ í”„ë¡œê·¸ë¨

ì´ì œ ê°™ì€ ê¸°ëŠ¥ì„ í•˜ëŠ” ë‹¤ìŒ í”„ë¡œê·¸ë¨ì„ ë³´ì.

```kotlin
import java.io.IOException
import java.nio.file.Files
import java.nio.file.Path
import java.nio.file.Paths
import java.util.stream.Collectors.groupingBy

class StreamAnagrams(
    private val dictionary: Path,
    private val minGroupSize: Int
) {
    fun run() {
        try {
            val words = Files.lines(dictionary)
            words.collect(
                groupingBy { word ->
                    word.chars().sorted()
                        .collect(
                            { StringBuilder() },
                            { sb, c -> sb.append(c.toChar()) },
                            StringBuilder::append
                        ).toString()
                }
            )
                .values.stream()
                .filter { group -> group.size >= minGroupSize }
                .map { group -> group.size.toString() + ": " + group }
                .forEach(System.out::println)
        } catch (e: IOException) {}
    }
}

fun main() {
    println("Example : StreamAnagrams")
    val dictionary: Path = Paths.get(dictionaryFilePath)
    val minGroupSize = 1

    val streamAnagrams = StreamAnagrams(dictionary, minGroupSize)
    streamAnagrams.run()
}
```

ì½”ë“œë¥¼ ì´í•´í•˜ê¸° ì–´ë ¤ìš´ê°€? ê±±ì •í•˜ì§€ ë§ì. ë‹¤ë¥¸ ì‚¬ëŒë„ ë§ˆì°¬ê°€ì§€ë‹¤.

**ìŠ¤íŠ¸ë¦¼ì„ ê³¼ìš©í•˜ë©´ í”„ë¡œê·¸ë¨ì´ ì½ê±°ë‚˜ ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì–´ë ¤ì›Œì§„ë‹¤.**

### ì•„ë‚˜ê·¸ë¨(anagram) ê·¸ë£¹ì„ ì¶œë ¥í•˜ê¸° - ì ë‹¹íˆ ìŠ¤íŠ¸ë¦¼ì„ ì‚¬ìš©í•œ ì½”ë“œ

ë‹¤í–‰íˆ ì ˆì¶© ì§€ì ì´ ìˆë‹¤.

ë‹¤ìŒ í”„ë¡œê·¸ë¨ë„ ì•ì„œì˜ ë‘ í”„ë¡œê·¸ë¨ê³¼ ê¸°ëŠ¥ì€ ê°™ì§€ë§Œ ìŠ¤íŠ¸ë¦¼ì„ ì ë‹¹íˆ ì‚¬ìš©í–ˆë‹¤.

ê·¸ ê²°ê³¼ ì›ë˜ ì½”ë“œë³´ë‹¤ ì§§ì„ ë¿ ì•„ë‹ˆë¼ ëª…í™•í•˜ê¸°ê¹Œì§€ í•˜ë‹¤.

```kotlin
import java.io.IOException
import java.nio.file.Files
import java.nio.file.Path
import java.nio.file.Paths
import java.util.Arrays
import java.util.stream.Collectors.groupingBy

class HybridAnagrams(
    private val dictionary: Path,
    private val minGroupSize: Int
) {
    fun run() {
        try {
            val words = Files.lines(dictionary)
            words.collect(
                groupingBy { word -> alphabetize(word) }
            )
                .values.stream()
                .filter { group -> group.size >= minGroupSize }
                .forEach { group -> println(group.size.toString() + ": " + group) }
        } catch (e: IOException) {}
    }

    private fun alphabetize(s: String): String {
        val a = s.toCharArray()
        Arrays.sort(a)
        return String(a)
    }
}

fun main() {
    println("Example : HybridAnagrams")
    val dictionary: Path = Paths.get(dictionaryFilePath)
    val minGroupSize = 1

    val hybridAnagrams = HybridAnagrams(dictionary, minGroupSize)
    hybridAnagrams.run()
}

```

ìŠ¤íŠ¸ë¦¼ì„ ì „ì— ë³¸ ì ì´ ì—†ë”ë¼ë„ ì´ ì½”ë“œëŠ” ì´í•´í•˜ê¸° ì‰¬ìš¸ ê²ƒì´ë‹¤.

- try-with-resources ë¸”ë¡ì—ì„œ ì‚¬ì „ íŒŒì¼ì„ ì—´ê³ ,
- íŒŒì¼ì˜ ëª¨ë“  ë¼ì¸ìœ¼ë¡œ êµ¬ì„±ëœ ìŠ¤íŠ¸ë¦¼ì„ ì–»ê³ ,
- ìŠ¤íŠ¸ë¦¼ ë³€ìˆ˜ì˜ ì´ë¦„ì„ wordsë¡œ ì§€ì–´ ìŠ¤íŠ¸ë¦¼ ì•ˆì˜ ê° **ì›ì†Œê°€ ë‹¨ì–´(word)ì„ì„ ëª…í™•íˆ í–ˆë‹¤**.

ì´ ìŠ¤íŠ¸ë¦¼ì˜ íŒŒì´í”„ë¼ì¸ì—ëŠ” ì¤‘ê°„ ì—°ì‚°ì€ ì—†ìœ¼ë©°, ì¢…ë‹¨ ì—°ì‚°ì—ì„œëŠ” ëª¨ë“  ë‹¨ì–´ë¥¼ ìˆ˜ì§‘í•´ ë§µìœ¼ë¡œ ëª¨ì€ë‹¤.

---

## CharStream

alphabetize ë©”ì„œë“œë„ ìŠ¤íŠ¸ë¦¼ì„ ì‚¬ìš©í•´ ë‹¤ë¥´ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

-> í•˜ì§€ë§Œ ê·¸ë ‡ê²Œ í•˜ë©´ ëª…í™•ì„±ì´ ë–¨ì–´ì§€ê³ , ì˜ëª» êµ¬í˜„í•  ê°€ëŠ¥ì„±ì´ ì»¤ì§„ë‹¤.
-> ì‹¬ì§€ì–´ ëŠë ¤ì§ˆ ìˆ˜ ë„ ìˆë‹¤.
-> ìë°”ê°€ ê¸°ë³¸ íƒ€ì…ì¸ char ìš© ìŠ¤íŠ¸ë¦¼ì„ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.

ë‹¤ìŒì€ ë¬¸ì œë¥¼ ì§ì ‘ ë³´ì—¬ì£¼ëŠ”ê²Œ ë‚˜ì„ ê²ƒ ê°™ì•„ char ê°’ë“¤ì„ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œë¥¼ ì¤€ë¹„ í•´ë³´ì•˜ë‹¤.

```kotlin
"Hello, world!".chars().forEach(System.out::print) // 72101108108111443211911111410810033
```

ê¸°ëŒ€í•œ ê°’ì€ `Hello, world!`ì˜€ê² ì§€ë§Œ, ê·¸ë ‡ì§€ ì•Šë‹¤ -> ìŠ¤íŠ¸ë¦¼ì˜ ì›ì†ŒëŠ” char ê°€ ì•„ë‹Œ int ê°’ì´ê¸° ë•Œë¬¸ì—

ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ í•˜ë©´ ì¢‹ì„ê¹Œ?

```kotlin
"Hello, world!".chars().forEach { x: Int -> print(x.toChar()) } // Hello, world!
```

ìœ„ì˜ ì½”ë“œì²˜ëŸ¼ **í˜•ë³€í™˜ì„ ëª…ì‹œì ìœ¼ë¡œ** í•´ì¤˜ì•¼ í•œë‹¤.

**í•˜ì§€ë§Œ char ê°’ë“¤ì„ ì²˜ë¦¬í•  ë•ŒëŠ” ìŠ¤íŠ¸ë¦¼ì„ ì‚¼ê°€ëŠ” í¸ì´ ë‚«ë‹¤.**

---

## ëª¨ë“  ë°˜ë³µë¬¸ì„ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë°”ê¾¸ê³  ì‹¶ì€ ìœ í˜¹ì´ ì¼ê² ì§€ë§Œ, ì„œë‘ë¥´ì§€ ì•ŠëŠ” ê²Œ ì¢‹ë‹¤.

-> ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë°”ê¾¸ëŠ”ê²Œ ê°€ëŠ¥í• ì§€ë¼ë„ ì½”ë“œ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ ì¸¡ë©´ì—ì„œëŠ” ì†í•´ë¥¼ ë³¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì—
-> ì¤‘ê°„ ì •ë„ ë³µì¡í•œ ì‘ì—…ì—ë„ (ì•ì„œì˜ ì•„ë‚˜ê·¸ë¨ í”„ë¡œê·¸ë¨ì²˜ëŸ¼) ìŠ¤íŠ¸ë¦¼ê³¼ ë°˜ë³µë¬¸ì„ ì ì ˆíˆ ì¡°í•©í•˜ëŠ”ê²Œ ìµœì„ ì´ë‹¤.
-> ê·¸ëŸ¬ë‹ˆ, **ê¸°ì¡´ ì½”ë“œëŠ” ìŠ¤íŠ¸ë¦¼ì„ ì‚¬ìš©í•˜ë„ë¡ ë¦¬íŒ©í„°ë§í•˜ë˜, ìƒˆ ì½”ë“œê°€ ë” ë‚˜ì•„ ë³´ì¼ ë•Œë§Œ ë°˜ì˜í•˜ì.**
-> ê·¸ ê¸°ì¤€ì€...? ğŸ¤”

ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì€ ë˜í’€ì´ë˜ëŠ” ê³„ì‚°ì„ í•¨ìˆ˜ ê°ì²´(ì£¼ë¡œ ëŒë‹¤ë‚˜ ë©”ì„œë“œ ì°¸ì¡°)ë¡œ í‘œí˜„í•œë‹¤.

ë°˜ë©´ ë°˜ë³µ ì½”ë“œì—ì„œëŠ” ì½”ë“œ ë¸”ë¡ì„ ì‚¬ìš©í•´ í‘œí˜„í•œë‹¤.

### í•¨ìˆ˜ ê°ì²´ë¡œëŠ” í•  ìˆ˜ ì—†ì§€ë§Œ, ì½”ë“œ ë¸”ë¡ìœ¼ë¡œëŠ” í•  ìˆ˜ ìˆëŠ” ì¼ë“¤ì˜ ì˜ˆ

- ì½”ë“œ ë¸”ë¡ì—ì„œëŠ” ë²”ìœ„ ì•ˆì˜ ì§€ì—­ë³€ìˆ˜ë¥¼ ì½ê³  ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.
  - í•˜ì§€ë§Œ ëŒë‹¤ì—ì„œëŠ” finalì´ê±°ë‚˜ ì‚¬ì‹¤ìƒ finalì¸ ë³€ìˆ˜ë§Œ ì½ì„ ìˆ˜ ìˆê³ , ì§€ì—­ë³€ìˆ˜ë¥¼ ìˆ˜ì •í•˜ëŠ” ê±´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
- ì½”ë“œ ë¸”ë¡ì—ì„œëŠ” return ë¬¸ì„ ì‚¬ìš©í•´ ë©”ì„œë“œì—ì„œ ë¹ ì ¸ë‚˜ê°€ê±°ë‚˜, breakë‚˜ continueë¬¸ìœ¼ë¡œ ë¸”ë¡ ë°”ê¹¥ì˜ ë°˜ë³µë¬¸ì„ ì¢…ë£Œí•˜ê±°ë‚˜ ë°˜ë³µì„ í•œ ë²ˆ ê±´ë„ˆë›¸ ìˆ˜ ìˆë‹¤. ë˜í•œ ë©”ì„œë“œ ì„ ì–¸ì— ëª…ì‹œëœ ê²€ì‚¬ ì˜ˆì™¸ë¥¼ ë˜ì§ˆ ìˆ˜ ìˆë‹¤.
  - í•˜ì§€ë§Œ ëŒë‹¤ë¡œëŠ” ì´ ì¤‘ ì–´ë–¤ ê²ƒë„ í•  ìˆ˜ ì—†ë‹¤.

ê³„ì‚° ë¡œì§ì—ì„œ ì´ìƒì˜ ì¼ë“¤ì„ ìˆ˜í–‰í•´ì•¼ í•œë‹¤ë©´ ìŠ¤íŠ¸ë¦¼ê³¼ëŠ” ë§ì§€ ì•ŠëŠ” ê²ƒì´ë‹¤.

### ê·¸ëŸ¼ ìŠ¤íŠ¸ë¦¼ì´ ì•„ì£¼ ì•ˆì„±ë§ì¶¤ì¸ ì¼ë“¤ì€?

ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë¡œì§ì´ë¼ë©´ ìŠ¤íŠ¸ë¦¼ì„ ì ìš©í•˜ê¸°ì— ì¢‹ì€ í›„ë³´ë‹¤.

- ì›ì†Œë“¤ì˜
  - ì‹œí€€ìŠ¤ë¥¼ **ì¼ê´€ë˜ê²Œ ë³€í™˜**í•œë‹¤.
  - ì‹œí€€ìŠ¤ë¥¼ **í•„í„°ë§**í•œë‹¤.
  - ì‹œí€€ìŠ¤ë¥¼ **í•˜ë‚˜ì˜ ì—°ì‚°ì„ ì‚¬ìš©í•´ ê²°í•©**í•œë‹¤. (ë”í•˜ê¸°, ì—°ê²°í•˜ê¸°, ìµœì†Ÿê°’ êµ¬í•˜ê¸° ë“±)
  - ì‹œí€€ìŠ¤ë¥¼ **ì»¬ë ‰ì…˜ì— ëª¨ì€ë‹¤**.
  - ì‹œí€€ìŠ¤ì—ì„œ **íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì›ì†Œë¥¼ ì°¾ëŠ”ë‹¤**.

### ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ì–´ë ¤ìš´ ì¼ì€?

ëŒ€í‘œì ì¸ ì˜ˆë¡œ, í•œ ë°ì´í„°ê°€ íŒŒì´í”„ë¼ì¸ì˜ ì—¬ëŸ¬ ë‹¨ê³„(stage)ë¥¼ í†µê³¼í•  ë•Œ ì´ ë°ì´í„°ì˜ ê° ë‹¨ê³„ì—ì„œì˜ ê°’ë“¤ì— ë™ì‹œì— ì ‘ê·¼í•˜ê¸°ëŠ” ì–´ë ¤ìš´ ê²½ìš°
-> ì™œëƒí•˜ë©´, ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì€ ì¼ë‹¨ í•œ ê°’ì„ ë‹¤ë¥¸ ê°’ì— ë§¤í•‘í•˜ê³  ë‚˜ë©´, ì›ë˜ì˜ ê°’ì€ ìƒëŠ” êµ¬ì¡°ì´ê¸° ë•Œë¬¸ì—

ì›ë˜ ê°’ê³¼ ìƒˆë¡œìš´ ê°’ì˜ ìŒì„ ì €ì¥í•˜ëŠ” ê°ì²´ë¥¼ ì‚¬ìš©í•´ ë§¤í•‘í•˜ëŠ” ìš°íšŒ ë°©ë²•ë„ ìˆì§€ë§Œ, ê·¸ë¦¬ ë§Œì¡±ìŠ¤ëŸ¬ìš´ í•´ë²•ì€ ì•„ë‹ ê²ƒì´ë‹¤.

ë§¤í•‘ ê°ì²´ê°€ í•„ìš”í•œ ë‹¨ê³„ê°€ ì—¬ëŸ¬ ê³³ì´ë¼ë©´ íŠ¹íˆ ë” ê·¸ë ‡ë‹¤.

ì´ëŸ° ë°©ì‹ì€ ì½”ë“œ ì–‘ë„ ë§ê³ , ì§€ì €ë¶„í•˜ì—¬ ìŠ¤íŠ¸ë¦¼ì„ ì“°ëŠ” ì£¼ëª©ì ì—ì„œ ì™„ì „íˆ ë²—ì–´ë‚œë‹¤.

ê°€ëŠ¥í•œ ê²½ìš°ë¼ë©´, ì• ë‹¨ê³„ì˜ ê°’ì´ í•„ìš”í•  ë•Œ ë§¤í•‘ì„ ê±°ê¾¸ë¡œ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì´ ë‚˜ì„ ê²ƒì´ë‹¤.

---

### [ë©”ë¥´ì„¼ ì†Œìˆ˜(Mersenne prime)](https://en.wikipedia.org/wiki/Mersenne_prime) êµ¬í•˜ê¸°

ì˜ˆë¥¼ ë“¤ì–´ ì²˜ìŒ 20ê°œì˜ [ë©”ë¥´ì„¼ ì†Œìˆ˜(Mersenne prime)](https://en.wikipedia.org/wiki/Mersenne_prime)ì„ ì¶œë ¥í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•´ë³´ì.
-> ë©”ë¥´ì„¼ ìˆ˜ëŠ” 2^n - 1, for some integer n
-> ë©”ë¥´ì„¼ ì†Œìˆ˜ëŠ” 2^p - 1, where p is a prime í˜•íƒœì˜ ì†Œìˆ˜

ë‹¤ìŒ ì½”ë“œëŠ” ìŠ¤íŠ¸ë¦¼ì„ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œì´ê³ , BigIntegerì˜ ì •ì  ë©¤ë²„ë“¤ì€ ì •ì  ì„í¬íŠ¸í•˜ì—¬ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•œë‹¤.

```kotlin
class MersennePrimes {
    fun primes(): Stream<BigInteger> {
        // ë©”ì„œë“œ ì´ë¦„ì—ì„œ ìŠ¤íŠ¸ë¦¼ì˜ ì›ì†Œê°€ ì†Œìˆ˜ì„ì„ ë§í•´ì¤€ë‹¤.
        return Stream.iterate(TWO) { obj: BigInteger -> obj.nextProbablePrime() }
    }
}
```

ìŠ¤íŠ¸ë¦¼ì„ ë°˜í™˜í•˜ëŠ” ë©”ì„œë” ì´ë¦„ì€ ì›ì†Œì˜ ì •ì²´ë¥¼ ì•Œë ¤ì£¼ëŠ” ë³µìˆ˜ ëª…ì‚¬ë¡œ ì“°ê¸°ë¥¼ ê°•ë ¥íˆ ì¶”ì²œí•œë‹¤.
-> ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ì˜ ê°€ë…ì„±ì´ í¬ê²Œ ì¢‹ì•„ì§ˆ ê²ƒì´ê¸° ë•Œë¬¸ì—

ë‹¤ìŒì€ ì²˜ìŒ 20ê°œì˜ ë©”ë¥´ì„¼ ì†Œìˆ˜ë¥¼ ì¶œë ¥í•˜ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤.

```kotlin
fun main() {
    MersennePrimes().primes().map { p -> TWO.pow(p.intValueExact()).subtract(ONE) } // ì†Œìˆ˜ë“¤ì„ ì‚¬ìš©í•´ì„œ ë©”ë¥´ì„¼ ìˆ˜ë¥¼ ê³„ì‚°
        .filter { mersenne -> mersenne.isProbablePrime(50) } // ê³„ì‚°í•œ ë©”ë¥´ì„¼ ìˆ˜ì— ëŒ€í•´ì„œ ì†Œìˆ˜ì¸ ê²½ìš°ë§Œ ë‚¨ê¸´ë‹¤.
        .limit(20) // ê²°ê³¼ ìŠ¤íŠ¸ë¦¼ì˜ ì›ì†Œ ìˆ˜ë¥¼ 20ê°œë¡œ ì œí•œ
        .forEach(System.out::println) // ì‘ì—…ì´ ëë‚˜ë©´ ì¶œë ¥
}

// 3
// 7
// 31
// 127
// 8191
// 131071
// 524287
// 2147483647
// 2305843009213693951
// 618970019642690137449562111
// ...
```

ì´ì œ ì—¬ê¸°ì„œ ë©”ë¥´ì„¼ ì†Œìˆ˜(2^p - 1)ì˜ pë¥¼ ì¶œë ¥í•˜ê¸°ë¥¼ ì›í•œë‹¤ê³  í•´ë³´ì.

ì´ ê°’ì€ ì´ˆê¸° ìŠ¤íŠ¸ë¦¼ì—ë§Œ ë‚˜íƒ€ë‚˜ë¯€ë¡œ ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ëŠ” ì¢…ë‹¨ ì—°ì‚°ì—ì„œëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.

ë‹¤í–‰íˆ, ì²« ë²ˆì§¸ ì¤‘ê°„ ì—°ì‚°ì—ì„œ ìˆ˜í–‰í•œ ë§¤í•‘ì„ ê±°ê¾¸ë¡œ ìˆ˜í–‰í•´ ë©”ë¥´ì„¼ ìˆ˜ì˜ ì§€ìˆ˜ë¥¼ ì‰½ê²Œ ê³„ì‚°í•´ë‚¼ ìˆ˜ ìˆë‹¤.

ì§€ìˆ˜ëŠ” ë‹¨ìˆœíˆ ìˆ«ìë¥¼ ì´ì§„ìˆ˜ë¡œ í‘œí˜„í•œ ë‹¤ìŒ ëª‡ ë¹„íŠ¸ì¸ì§€ ì„¸ë©´ ë‚˜ì˜¤ë¯€ë¡œ,

ì¢…ë‹¨ ì—°ì‚°ì„ ë‹¤ìŒì²˜ëŸ¼ ì‘ì„±í•˜ë©´ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

```kotlin
.forEach { mp -> println(mp.bitLength().toString() + ": " + mp) } // ì‘ì—…ì´ ëë‚˜ë©´ ì§€ìˆ˜ pì™€ ë©”ë¥´ì„¼ ì†Œìˆ˜ë¥¼ ì¶œë ¥

// 2: 3
// 3: 7
// 5: 31
// 7: 127
// 13: 8191
// 17: 131071
// 19: 524287
// 31: 2147483647
// 61: 2305843009213693951
// 89: 618970019642690137449562111
// ...
```

---

### ì¹´ë“œ ë±ì„ ì´ˆê¸°í™”í•˜ëŠ” ì‘ì—…

ìŠ¤íŠ¸ë¦¼ê³¼ ë°˜ë³µ ì¤‘ ì–´ëŠ ìª½ì„ ì¨ì•¼ í• ì§€ ë°”ë¡œ ì–´ë ¤ìš´ ì‘ì—…ë„ ë§ë‹¤.

ë‹¤ìŒì€ ì¹´ë“œ ë±ì„ ì´ˆê¸°í™”í•˜ëŠ” ì‘ì—…ì´ë‹¤.

`ì¹´ë“œ` : ìˆ«ì(rank)ì™€ ë¬´ëŠ¬(suit)ë¥¼ ë¬¶ì€ ë¶ˆë³€ ê°’ í´ë˜ìŠ¤

`ìˆ«ì`, `ë¬´ëŠ¬`: ì—´ê±° íƒ€ì…

ì´ ì‘ì—…ì€ ë‘ ì§‘í•©ì˜ ì›ì†Œë“¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ê°€ëŠ¥í•œ ëª¨ë“  ì¡°í•©ì„ ê³„ì‚°í•˜ëŠ” ë¬¸ì œ

-> ìˆ˜í•™ìë“¤ì€ ì´ë¥¼ ë‘ ì§‘í•©ì˜ ë°ì¹´ë¥´íŠ¸ ê³±ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

```kotlin
// ë°ì¹´ë¥´íŠ¸ ê³± ê³„ì‚°ì„ ë°˜ë³µ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„
private fun newDeckLoop(): List<Card> {
    val result: MutableList<Card> = ArrayList()
    for (suit in Suit.values()) for (rank in Rank.values()) result.add(Card(suit, rank))
    return result
}

// ë°ì¹´ë¥´íŠ¸ ê³± ê³„ì‚°ì„ ìŠ¤íŠ¸ë¦¼ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„
private fun newDeckStream(): List<Card> {
    return Suit.values()
        .flatMap { suit -> Rank.values().map { rank -> Card(suit, rank) } }
        .toList()
}
```

---

## ê²°ë¡ 

ì–´ëŠ newDeck ì´ ë” ì¢‹ì•„ ë³´ì´ëŠ”ì§€ëŠ” ê²°êµ­ ê°œì¸ ì·¨í–¥ê³¼ í”„ë¡œê·¸ë˜ë° í™˜ê²½ì˜ ë¬¸ì œë‹¤.

ì²˜ìŒ ë°©ì‹ì€ ë” ë‹¨ìˆœí•˜ê³  ì•„ë§ˆ ë” ìì—°ìŠ¤ëŸ¬ì›Œ ë³´ì¼ ê²ƒì´ë‹¤.

ì´í•´í•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸°ì— ì²˜ìŒ ì½”ë“œê°€ ë” í¸í•œ í”„ë¡œê·¸ë˜ë¨¸ê°€ ë§ê² ì§€ë§Œ, ë‘ ë²ˆì§¸ì¸ ìŠ¤íŠ¸ë¦¼ ë°©ì‹ì„ í¸í•˜ê²Œ ìƒê°í•˜ëŠ” í”„ë¡œê·¸ë˜ë¨¸ë„ ìˆë‹¤.

## í•µì‹¬ ì •ë¦¬

ìŠ¤íŠ¸ë¦¼, ë°˜ë³µë°©ì‹ ëª¨ë‘ ê°ìì—ê²Œ ë” ì•Œë§ì€ ë°©ì‹ì´ ìˆë‹¤.

ìˆ˜ë§ì€ ì‘ì—…ì´ ì´ ë‘˜ì„ ì¡°í•©í–ˆì„ ë•Œ ê°€ì¥ ë©‹ì§€ê²Œ í•´ê²°ëœë‹¤.

ìŠ¤íŠ¸ë¦¼ê³¼ ë°˜ë³µ ì¤‘ ì–´ëŠ ìª½ì´ ë‚˜ì€ì§€ ì–´ë µë‹¤ë©´ ë‘˜ ë‹¤ í•´ë³´ê³  ë” ë‚˜ì€ ìª½ì„ íƒí•˜ì.

## References

- [Java 8 Stream API Analogies in Kotlin](https://www.baeldung.com/kotlin/java-8-stream-vs-kotlin)
- [Kotlin sequences vs. Java streams](https://discuss.kotlinlang.org/t/kotlin-sequences-vs-java-streams/14415)
